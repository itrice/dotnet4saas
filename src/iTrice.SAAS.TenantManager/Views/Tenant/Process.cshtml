@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}

<div id="content" style="margin-top:80px;">
    @foreach (var host in ViewBag.hosts as List<HostProcess>)
    {
        <div class="layui-row layui-col-space15">
            <div class="layui-col-md6">
                <div class="layui-card" style="background-color:#CCC">
                    <div class="layui-card-header"><i class="layui-icon" style="color:forestgreen">&#xe679;</i>&nbsp;&nbsp; @host.TenantName</div>
                    <div class="layui-card-body">
                        UID: @host.TenantId<br>
                        CPU:@host.CPU<br>
                        内存:@host.Memory<br>
                        地址:@host.URL<br>
                        <div class="layui-row">
                            <button class="layui-btn layui-btn-sm" onclick="startHost('@host.TenantId')">
                                <i class="layui-icon">&#xe652;</i>
                            </button>
                            <button class="layui-btn layui-btn-sm" onclick="stopHost('@host.TenantId')">
                                <i class="layui-icon">&#xe651;</i>
                            </button>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    }
</div>
<script>
    $(function () {
        // 定时获取宿主程序状态
    });
    function startHost(id) {
        $.ajax({
            url: '\StartTenantServer?id='+id,
            success: function (rs) {
                if (rs.code > 0) {
                    //top.location.reload();
                    layer.msg(rs.message);
                } else {
                    layer.msg(rs.message);
                }
            }
        });
    }
    function stopHost(id) {
        $.ajax({
            url: '\StopTenantServer?id=' + id,
            success: function (rs) {
                if (rs.code > 0) {
                    //top.location.reload();
                    layer.msg(rs.message);
                } else {
                    layer.msg(rs.message);
                }
            }
        });
    }
</script>
